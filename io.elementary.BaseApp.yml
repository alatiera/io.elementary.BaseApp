id:                   io.elementary.BaseApp
runtime:              org.freedesktop.Platform
sdk:                  org.freedesktop.Sdk
runtime-version:      "18.08"
separate-locales:     false
cleanup:
  - /cache
  - /man
  - /share/aclocal
  - /share/devhelp
  - /share/gtk-doc
  - /share/man
  - /lib/systemd
  - "*.la"
  - "*.a"
modules:
  - name:             graphviz
    sources:
      - type:         archive
        url:          https://graphviz.gitlab.io/pub/graphviz/stable/SOURCES/graphviz.tar.gz
        sha256:       ca5218fade0204d59947126c38439f432853543b0818d9d728c589dfe7f3a421

  - name:             vala
    cleanup-platform:
      - "*"
    config-opts:
      - --enable-vapigen
      - --enable-unversioned
    sources:
      - type:         archive
        url:          https://download.gnome.org/sources/vala/0.40/vala-0.40.10.tar.xz
        sha256:       fe04f9f95616cfa868ae22e5ac070607e871799f568c38be38761f2f39aa9877

  - name:             libgee
    sources:
      - type:         archive
        url:          https://download.gnome.org/sources/libgee/0.20/libgee-0.20.0.tar.xz
        sha256:       21308ba3ed77646dda2e724c0e8d5a2f8d101fb05e078975a532d7887223c2bb
      - type:         shell
        commands:
          - sed -i 's/`$PKG_CONFIG --variable=girdir gobject-introspection-1.0`/\/app\/share\/gir-1.0/g' configure
          - sed -i 's/"$($PKG_CONFIG --variable=typelibdir gobject-introspection-1.0)"/\/app\/lib\/girepository-1.0/g' configure

  - name:             granite
    buildsystem:      cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DINTROSPECTION_GIRDIR=/app/share/gir-1.0
      - -DINTROSPECTION_TYPELIBDIR=/app/lib/girepository-1.0
    cleanup:
      - /bin
      - /share/applications
    sources:
      - type:         archive
        url:          https://github.com/elementary/granite/archive/5.1.0.tar.gz
        sha256:       4483399c62bf4cf5c26a6b708736b2b80caae8d40a0452be45548f7e8f23e0ed

  - name:             elementary-theme
    buildsystem:      meson
    sources:
      - type:         git
        url:          https://github.com/elementary/stylesheet
        commit:       4000a3247b2ef264d8a7cf1df6eb4877386562c9

  - name:             elementary-icons
    buildsystem:      meson
    config-opts:
      - -Dpalettes=false
    sources:
      - type:         git
        url:          https://github.com/elementary/icons
        commit:       1d23b93d70513cb8636864cf00ef0f27260d62d9
